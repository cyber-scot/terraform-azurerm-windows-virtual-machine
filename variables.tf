variable "vms" {
  description = "List of VM configurations."
  type = list(object({
    name                                 = string
    location                             = string
    rg_name                              = string
    nic_name                             = optional(string)
    nic_ipconfig_name                    = optional(string)
    enable_accelerated_networking        = optional(bool)
    static_private_ip                    = optional(string)
    public_ip_sku                        = optional(string, "Standard")
    pip_name                             = optional(string)
    pip_custom_dns_label                 = optional(string)
    subnet_id                            = string
    tags                                 = map(string)
    license_type                         = optional(string)
    patch_mode                           = optional(string)
    enable_automatic_updates             = optional(bool)
    computer_name                        = optional(string)
    admin_username                       = optional(string)
    admin_password                       = optional(string)
    vm_size                              = optional(string)
    use_custom_image                     = optional(bool, false)
    custom_source_image_id               = optional(string)
    availability_zone                    = optional(string, "random")
    availability_set_id                  = optional(string)
    timezone                             = optional(string)
    custom_data                          = optional(string)
    enable_encryption_at_host            = optional(bool)
    allow_extension_operations           = optional(bool)
    provision_vm_agent                   = optional(bool)
    use_simple_image                     = optional(bool, true)
    use_simple_image_with_plan           = optional(bool, false)
    vm_os_simple                         = optional(string)
    vm_os_id                             = optional(string)
    vm_os_publisher                      = optional(string)
    vm_os_offer                          = optional(string)
    vm_os_sku                            = optional(string)
    vm_os_version                        = optional(string)
    ultra_ssd_enabled                    = optional(bool)
    source_image_reference               = optional(map(string))
    plan                                 = optional(map(string))
    identity_type                        = optional(string)
    identity_ids                         = optional(list(string))
    spot_instance                        = optional(bool)
    spot_instance_max_bid_price          = optional(string)
    spot_instance_eviction_policy        = optional(string)
    os_disk_name                         = optional(string)
    os_disk_caching                      = optional(string)
    storage_account_type                 = optional(string)
    os_disk_size_gb                      = optional(number)
    boot_diagnostics_storage_account_uri = optional(string, null)
  }))
  default = []
}
